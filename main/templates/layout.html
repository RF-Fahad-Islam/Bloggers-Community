<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
xmlns:og="http://ogp.me/ns#"
xmlns:fb="https://www.facebook.com/2008/fbml">

<head>
  <script async="async" data-cfasync="false"
    src="//pl18014730.highperformancecpmgate.com/9a2c7ef27929b21d1b46e913ecf43340/invoke.js"></script>
  <!-- HTMX -->
  <script src="{{url_for('static',filename='js/htmx.min.js')}}"></script>
  <!-- ios support -->
  <link rel="apple-touch-icon" href="{{url_for('static', filename='images/webIcon.png')}}" />
  <meta name="apple-mobile-web-app-status-bar" content="#db4938" />
  <meta name="theme-color" content="#db4938" />
  <!-- Adsterra -->
  <!-- <script async="async" data-cfasync="false"
    src="//pl18014730.highperformancecpmgate.com/9a2c7ef27929b21d1b46e913ecf43340/invoke.js" defer></script> -->

  <!-- Google Adsense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5004388589023803"
    crossorigin="anonymous"></script>
  <!-- Search Console -->
  <meta name="google-site-verification" content="6_BTAJC1_O_kJB06w4-NTW0dW7kEDp41QKx0sT8Hh-U" />
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SDSRGLT5SF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-SDSRGLT5SF');
  </script>

<!-- Hotjar Tracking Code for Blogsphere app -->
<script>
  (function(h,o,t,j,a,r){
      h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
      h._hjSettings={hjid:3284509,hjsv:6};
      a=o.getElementsByTagName('head')[0];
      r=o.createElement('script');r.async=1;
      r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
      a.appendChild(r);
  })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>
  <!-- !Instant Page Load CDN -->
  <script src="//instant.page/5.1.1" type="module"
    integrity="sha384-MWfCL6g1OTGsbSwfuMHc8+8J2u71/LA8dzlIN3ycajckxuZZmF+DNjdm7O6H3PSq" defer></script>
    <!-- plausible analytics -->
    <script defer data-domain="blogsphere.top" src="https://plausible.io/js/script.js"></script>
    <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  
  {% block meta %}{% endblock meta %}

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous" />

  {# Font Awesome #}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="shortcut icon" href="{{url_for('static', filename='images/webIcon.png')}}" type="image/x-icon" />
  {% block title %} {% endblock title %}
  {% block css %} {% endblock css %}
  <style>
    @media only screen and (min-width: 990px) {
      .floating-container {
        display: none;
      }
    }
  </style>
  <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}" />
</head>

<body class="bg-light" style="position: relative;">

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <!-- Facebook PlugIn -->
  <div id="fb-root"></div>
  <script async defer crossorigin="anonymous"
    src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v11.0&appId=2188064051327817&autoLogAppEvents=1"
    nonce="LKrPizLV"></script>


  <nav class="navbar  sticky-top  navbar-expand-lg navbar-light bg-white">
    <div class="container-fluid">
      <a href="/" class="navbar-barnd">
        <img src="{{url_for('static', filename='images/webIcon.png')}}" alt="" width="30" height="30" />
        <a class="navbar-brand fw-bold text-muted" href="/">{{params['app_name']}}</a>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <form class="d-flex" action="/search">
            <input class="form-control me-2 searchBar" name="q" type="search" placeholder=" Search....." minLength="3"
              maxLength="200" aria-label="Search" />
            <button class="searchBtn btn btn-light" style="border-radius: 4px!important;">
              <i class="fa fa-search text-muted"></i>
            </button>
          </form>
        </ul>

        <!-- !User profile and create post button -->
        {% if current_user.is_authenticated %}
        <button type="button" class="btn btn-primary" data-bs-html="true" data-bs-toggle="popover"
          data-bs-placement="left" data-bs-container="false" data-bs-animation="true" data-bs-trigger="click"
          data-bs-content='<a class="btn btn-outline-primary mx-3" href="/blog-writer/edit/0">
          <i class="fa fa-plus-circle"></i> New Post
        </a>
       
        '><i class="fa fa-plus-circle"></i> Create Post</button>

        <span class="btn btn-orange mx-1" data-bs-toggle="modal" data-bs-target="#draftModal">
          <i class="fa fa-paperclip"></i> Quick Draft
        </span>
        <a class="btn hover-btn border-0 ml-2 fw-bolder position-relative" href="{{url_for('notifications')}}"><i
          class="fa fa-bell-o" style="font-size: 26px; "></i>
      </a>
        <a class="btn hover-btn border-0 ml-2 fw-bolder position-relative" href="/readinglist/u"><i
            class="fa fa-bookmark-o" style="font-size: 26px; "></i>
          <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-info">
            <b id="bookmarkCount">{{current_user.readinglist.blogs|length}}</b>
            <span class="visually-hidden">unread messages</span>
          </span>
        </a>

        <span class="btn btn-light rounded-pill text-dark mx-3" style="cursor: pointer" id="profilePopover"
          data-bs-toggle="popover" data-bs-placement="left" data-bs-container="false" data-bs-animation="true"
          data-bs-trigger="click" data-bs-html="true" title="@{{current_user.username}}" data-bs-content='
              <a href="/p/{{current_user.username}}" class="btn btn-outline-info fw-bold" aria-current="true">
               {{current_user.firstname}} {{current_user.lastname}} @{{current_user.username}}
              </a>
              <hr>
              <div class="list-group list-group-flush fw-bold border-0">
                  <a href="/blog-writer/edit/0" class="list-group-item"><i class="fa fa-plus-circle"></i> Create Post</a>
                  <a href="/dashboard" class="list-group-item"><i class="fa fa-bar-chart"></i> Dashboard</a>
                  <a href="/settings" class="list-group-item"><i class="fa fa-cog"></i> Settings</a>
                  {% if current_user.is_admin %}
                  <a href="/admin/dashboard" class="list-group-item list-danger"><i class="fa fa-lock"></i> Admin Dashboard</a>
                  <a href="/admin" class="list-group-item list-danger"><i class="fa fa-server"></i> Database</a>
                  {% endif %}
                  <a href="/logout" class="list-group-item list-danger text-danger"><i class="fa fa-power-off"></i> Logout</a>
                </div>
              '><strong>{{current_user.firstname}}</strong>
          <img src="{{current_user.picture}}" alt="Avatar" class="profile" />
        </span>
      </div>
    </div>
    {% else %}
    <!-- <a class="btn btn-outline-primary mx-3 float-end" href="/signup"><i class="fa fa-user-plus"></i> SignUp</a> -->
    <a class="btn btn-outline-success float-end" href="{{url_for('googleLogin')}}"><i class="fa fa-sign-in"></i> Login</a>
    {% endif %}
  </nav>

  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header">
        <strong class="me-auto">Your are now following this profile</strong>
        <small>now</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">
        You can check your following lists.
      </div>
    </div>
  </div>
  <!-- !Flashed Messages -->
  <div class="container">
    {% with messages=get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-{{message[0]}} alert-dismissible fade show" id="msg" role="alert">
      <strong>{{message[1] | safe}}</strong>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
  </div>
  <!-- Modal -->
  <div class="modal fade" id="draftModal" tabindex="-1" aria-labelledby="draftModalLabel" aria-hidden="true"
    data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="draftModalLabel">Draft a Blog</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form method="POST" action="/draft">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
            <div class="mb-3">
              <label for="recipient-name" class="col-form-label">Title:</label>
              <input type="text" min="3" max="100" name="title" class="form-control" id="recipient-name">
            </div>
            <div class="mb-3">
              <label for="message-text" class="col-form-label">Content:</label>
              <textarea class="form-control" name="content" minlength="5" maxlength="500" id="message-text"></textarea>
            </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save Draft</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- !Import Modal -->
  <div class="modal fade" id="importModal" tabindex="-1" aria-labelledby="importModalLabel" aria-hidden="true"
    data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="importModalLabel">Draft a Blog</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form method="POST" action="/draft">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
            <div class="mb-3">
              <label for="recipient-name" class="col-form-label">Title:</label>
              <input type="text" min="3" max="100" name="title" class="form-control" id="recipient-name">
            </div>
            <div class="mb-3">
              <label for="message-text" class="col-form-label">Content:</label>
              <textarea class="form-control" name="content" minlength="5" maxlength="500" id="message-text"></textarea>
            </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save Draft</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  {% block body %} {% endblock body %}
{% block footer %}
  
{% endblock footer %}
  <!-- <footer class="container bg-white d-fixed bottom-0 text-center" style="margin-top: 10px; position:absolute; bottom:0;">
    <p><i class="fa fa-thumb-tack"></i> Â© 2020-2021 | Owned By <b class="text-muted font-weight-bolder">RF Fahad
            Islam<b> | <a href="https://github.com/RF-Fahad-Islam/" style="text-decoration: none; color: black;">My Github</a> <i class="fa fa-git-square"></i>
</b></b></p></footer> -->
  <!-- Option 1: Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
    crossorigin="anonymous"></script>

  <!-- Option 2: Separate Popper and Bootstrap JS -->
  <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script>
    -->
  {# Jquery CDN #}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
    integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script type="module">
    const popoverTriggerList = document.querySelectorAll('[data-bs-toggle="popover"]')
    const popoverList = [...popoverTriggerList].map(popoverTriggerEl => new bootstrap.Popover(popoverTriggerEl))

    /* When the user scrolls down, hide the navbar. When the user scrolls up, show the navbar */


  </script>

  <!-- <script src="{{url_for('static', filename='js/sw.js')}}"></script>
  <script src="{{url_for('static', filename='js/app.js')}}"></script> -->
  <script>if(document.getElementById('msg')){window.setTimeout("document.getElementById('msg').style.display='none';", 5000);} </script>
  {% block script %} {% endblock script %}

</body>

</html>